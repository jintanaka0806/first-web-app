<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ã”ã˜</title>
  <style>

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  background: #000;
  color: #fff;
  margin: 0;
  padding: 16px;
}

   h1 {
  text-align: center;
  margin: 40px 0 20px;
  font-size: 64px;
}
    .sub {
      text-align: center;
      color: #666;
      margin-bottom: 16px;
      font-size: 14px;
    }
    .card {
      background: #fff;
      border-radius: 12px;
      padding: 12px;
      margin-bottom: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    input {
      width: 100%;
      font-size: 18px;
      padding: 12px;
      border-radius: 8px;
      border: 1px solid #ddd;
      box-sizing: border-box;
    }
    button {
      width: 100%;
      margin-top: 8px;
      padding: 12px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      background: #111;
      color: #fff;
    }
    button:disabled {
      background: #aaa;
    }
    .post {
      font-size: 18px;
      padding: 10px 0;
      border-bottom: 1px solid #eee;
    }
    .time {
      font-size: 12px;
      color: #888;
    }
  </style>
</head>
<body>

  <h1>ã”ã˜</h1>
  <div class="sub">17æ™‚ä»¥é™ã€ä»Šæ—¥ã‚’5æ–‡å­—ã§</div>

  <div class="card">
    <input id="text" placeholder="5æ–‡å­—ã§æ›¸ã" maxlength="5" />
    <button id="postBtn">æŠ•ç¨¿ã™ã‚‹</button>
    <div id="msg" class="time"></div>
  </div>

  <div class="card" id="timeline">
    <!-- æŠ•ç¨¿ãŒã“ã“ã«å‡ºã‚‹ -->
  </div>

  <script>
    const postBtn = document.getElementById("postBtn");
    const textInput = document.getElementById("text");
    const msg = document.getElementById("msg");
    const timeline = document.getElementById("timeline");

    const dummyPosts = ["æ•°å­¦æ­»", "éŸ³æ¥½æ²¼", "ğŸ˜´å¸°å®…", "éƒ¨æ´»ç–²", "ç¥æ›²ä¸­"];

    function canPostNow() {
      const hour = new Date().getHours();
      return hour >= 17 && hour < 24;
    }

    function postedToday() {
      const last = localStorage.getItem("goji_last_post");
      const today = new Date().toDateString();
      return last === today;
    }

    function renderTimeline(myPost) {
      timeline.innerHTML = "";
      const posts = [...dummyPosts];
      if (myPost) posts.unshift(myPost);

      posts.forEach(p => {
        const div = document.createElement("div");
        div.className = "post";
        div.textContent = p;
        timeline.appendChild(div);
      });
    }

    // åˆæœŸè¡¨ç¤º
    renderTimeline(localStorage.getItem("goji_post"));

    postBtn.onclick = () => {
      if (!canPostNow()) {
        msg.textContent = "17æ™‚ä»¥é™ã«æŠ•ç¨¿ã§ãã¾ã™";
        return;
      }
      if (postedToday()) {
        msg.textContent = "ä»Šæ—¥ã¯ã‚‚ã†æŠ•ç¨¿æ¸ˆã¿ã§ã™";
        return;
      }
      const text = textInput.value.trim();
      if (text.length === 0) return;

      localStorage.setItem("goji_post", text);
      localStorage.setItem("goji_last_post", new Date().toDateString());
      renderTimeline(text);
      msg.textContent = "æŠ•ç¨¿ã—ã¾ã—ãŸ";
      textInput.value = "";
    };
  </script>

</body>
</html>
