<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ã”ã˜</title>

<style>
body {
  margin: 0;
  font-family: 'Noto Sans JP', sans-serif;
  background: #f2f2f2;
  transition: 0.3s;
}

.dark {
  background: #111;
  color: white;
}

/* ===== ãƒ˜ãƒƒãƒ€ãƒ¼ ===== */
.app-header {
  position: fixed;
  top: 0;
  width: 100%;
  height: 56px;
  background: #fff;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 16px;
  font-weight: bold;
  box-shadow: 0 2px 5px rgba(0,0,0,0.05);
  z-index: 5;
}

.dark .app-header { background: #1e1e1e; }

/* ===== ã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ ===== */
#splash {
  display:flex;
  justify-content:center;
  align-items:center;
  position:fixed;
  width:100%;
  height:100%;
  background:#f2f2f2;
  z-index:10;
  transition:1.5s;
}
#splash.fade-out { opacity:0; }

/* ===== å…¥åŠ›ç”»é¢ ===== */
#input-screen {
  display:none;
  justify-content:center;
  align-items:center;
  height:100vh;
}
.input-area {
  display:flex;
  gap:8px;
}
.input-area input {
  width:120px;
  padding:8px;
  border-radius:8px;
  border:1px solid #ccc;
  text-align:center;
}
.input-area button {
  padding:8px 16px;
  border-radius:8px;
  border:none;
  background:#333;
  color:white;
  cursor:pointer;
}

/* ===== æŠ•ç¨¿ç”»é¢ ===== */
#posts-screen {
  display:none;
  padding-top:70px;
  padding-bottom:80px;
}

.posts {
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:12px;
  padding:10px;
}

.post-card {
  background:#fff;
  width:100%;
  max-width:400px;
  padding:12px;
  border-radius:14px;
  box-shadow:0 2px 6px rgba(0,0,0,0.08);
  transition:0.2s;
}

.dark .post-card {
  background:#1e1e1e;
}

.post-header {
  display:flex;
  justify-content:space-between;
  font-size:12px;
  color:gray;
  margin-bottom:6px;
}

.post-text {
  font-size:16px;
  margin-bottom:8px;
}

.post-actions {
  display:flex;
  justify-content:space-around;
}

.post-actions button {
  background:none;
  border:none;
  cursor:pointer;
  font-size:14px;
  transition:0.2s;
}

.like-btn:active {
  transform:scale(1.4);
}

.reply-box {
  font-size:13px;
  margin-top:6px;
  color:#555;
}

.dark .reply-box { color:#aaa; }

/* ===== ä¸‹ãƒŠãƒ“ ===== */
.bottom-nav {
  position:fixed;
  bottom:0;
  width:100%;
  height:60px;
  background:#fff;
  display:flex;
  justify-content:space-around;
  align-items:center;
  box-shadow:0 -2px 5px rgba(0,0,0,0.05);
}

.dark .bottom-nav { background:#1e1e1e; }

.bottom-nav div {
  cursor:pointer;
  font-size:20px;
}
</style>
</head>

<body>

<!-- ã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ -->
<div id="splash">
  <h1>ã”ã˜</h1>
</div>

<!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
<header class="app-header">
  <div>ã”ã˜</div>
  <div id="mode-toggle">ğŸŒ™</div>
</header>

<!-- å…¥åŠ›ç”»é¢ -->
<div id="input-screen">
  <div class="input-area">
    <input type="text" id="post-input" maxlength="5" placeholder="5æ–‡å­—å…¥åŠ›">
    <button id="post-btn">â†’</button>
  </div>
</div>

<!-- æŠ•ç¨¿ç”»é¢ -->
<div id="posts-screen">
  <div class="posts"></div>
</div>

<!-- ä¸‹ãƒŠãƒ“ -->
<nav class="bottom-nav">
  <div>ğŸ </div>
  <div id="new-post">â•</div>
  <div>ğŸ‘¤</div>
</nav>

<script>
const splash = document.getElementById('splash');
const inputScreen = document.getElementById('input-screen');
const postsScreen = document.getElementById('posts-screen');
const btn = document.getElementById('post-btn');
const input = document.getElementById('post-input');
const postsContainer = document.querySelector('.posts');
const modeToggle = document.getElementById('mode-toggle');
const newPostBtn = document.getElementById('new-post');

let posts = JSON.parse(localStorage.getItem("gojiPosts")) || [];

const otherUsersPosts = [
  { text:'ãŸã®ã—ã„ãª', likes:0, time:'1åˆ†å‰' },
  { text:'ä»Šå…ƒæ°—å¾Œç„¡', likes:0, time:'5åˆ†å‰' },
  { text:'IMslp', likes:0, time:'10åˆ†å‰' }
];

function savePosts(){
  localStorage.setItem("gojiPosts", JSON.stringify(posts));
}

function renderPosts(){
  postsContainer.innerHTML = '';
  const allPosts = [...posts, ...otherUsersPosts];

  allPosts.forEach((post,index)=>{
    const div = document.createElement('div');
    div.className='post-card';
    div.innerHTML=`
      <div class="post-header">
        <span>user_${Math.floor(Math.random()*100)}</span>
        <span>${post.time||'ä»Š'}</span>
      </div>
      <div class="post-text">${post.text}</div>
      <div class="post-actions">
        <button class="like-btn">â™¡ ${post.likes||0}</button>
        <button class="reply-btn">ğŸ’¬</button>
        ${index < posts.length ? '<button class="delete-btn">ğŸ—‘</button>' : ''}
      </div>
      ${post.reply ? `<div class="reply-box">â†ª ${post.reply}</div>`:''}
    `;

    div.querySelector('.like-btn').onclick=()=>{
      post.likes=(post.likes||0)+1;
      savePosts();
      renderPosts();
    };

    div.querySelector('.reply-btn').onclick=()=>{
      const reply=prompt("ãƒªãƒ—ãƒ©ã‚¤:");
      if(reply){
        post.reply=reply;
        savePosts();
        renderPosts();
      }
    };

    if(index < posts.length){
      div.querySelector('.delete-btn').onclick=()=>{
        posts.splice(index,1);
        savePosts();
        renderPosts();
      };
    }

    postsContainer.appendChild(div);
  });
}

btn.onclick=()=>{
  const text=input.value.trim();
  if(text.length!==5){
    alert("5æ–‡å­—ã´ã£ãŸã‚Šï¼");
    return;
  }

  posts.unshift({text:text,likes:0,time:'ä»Š'});
  savePosts();
  input.value='';
  inputScreen.style.display='none';
  postsScreen.style.display='block';
  renderPosts();
};

newPostBtn.onclick=()=>{
  postsScreen.style.display='none';
  inputScreen.style.display='flex';
};

modeToggle.onclick=()=>{
  document.body.classList.toggle("dark");
};

setTimeout(()=>{
  splash.classList.add("fade-out");
  setTimeout(()=>{
    splash.style.display='none';
    inputScreen.style.display='flex';
  },1500);
},2000);
</script>

</body>
</html>
